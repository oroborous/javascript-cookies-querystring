<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <title>Display the Query String</title>
    <link rel="stylesheet" href="qs.css">
</head>

<body>
<fieldset>
    <legend>Print the entire query string</legend>
    <div id="formValues"></div>
    <br>
    <div>
        <a href="forms.html">Back</a>
    </div>
</fieldset>
</body>

<script src="https://code.jquery.com/jquery-3.5.1.js"></script>
<script>
    // Wait until the DOM is loaded to run the function
    $(readAndPrintQS);

    // Read the values from the URL and print them
    function readAndPrintQS() {
        // Store the query string portion of the URL
        var queryString = location.search;

        // Start building an output string
        var output = queryString + "<br><br>";

        // Remove the "?" with substring
        // Then split into an array of strings over the "&"
        var queryStringSplit = queryString.substring(1).split("&");

        // Loop through the array of strings
        // Each string should look like "name=value"
        for (var i = 0; i < queryStringSplit.length; i++) {
            // Store the string in a variable for convenience
            var nameValuePair = queryStringSplit[i];
            // Spaces decode as plusses so they must be replaced
            nameValuePair = nameValuePair.replace(/\+/g, "%20");
            // Convert from web encoding
            nameValuePair = decodeURIComponent(nameValuePair);
            // Find the index of the "=" character
            var indexOfEquals = nameValuePair.indexOf("=");
            // Substring everything up to (not including) the "="
            var name = nameValuePair.substring(0, indexOfEquals);
            // Substring everything after the "="
            var value = nameValuePair.substring(indexOfEquals + 1);

            // Concatenate the pieces to the output string
            output += name + ": " + value + "<br>";
        }

        // Put the output string on the screen
        $("#formValues").html(output);
    }

</script>
</html>
